(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{907:function(e,s,r){Promise.resolve().then(r.bind(r,2120)),Promise.resolve().then(r.t.bind(r,617,23))},2120:function(e,s,r){"use strict";r.r(s),r.d(s,{BlogPostsTable:function(){return BlogPostsTable}});var n=r(5667),t=r(2026),i=r(2353),l=r.n(i),a=r(6612),d=r(9736),c=r(5689),o=r(8712),h=r(1057),u=r(6889);let x=(0,h.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:s,variant:r,...t}=e;return(0,n.jsx)("div",{className:(0,u.cn)(x({variant:r}),s),...t})}var j=r(4251),p=r(870),g=r(9397),f=r(5607),b=r(187);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,b.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=r(5327),N=r(1596);function BlogPostsTable(e){let{posts:s}=e,r=(0,a.useRouter)(),[i,h]=(0,t.useState)(!1),[u,x]=(0,t.useState)(null),b=(0,d.e)(),{toast:y}=(0,N.p)(),handleDelete=async()=>{if(!u)return;let{error:e}=await b.from("blog_posts").delete().eq("id",u.id);if(e){y({title:"خطأ",description:"حدث خطأ أثناء حذف المقال",variant:"destructive"});return}y({title:"تم الحذف",description:"تم حذف المقال بنجاح"}),r.refresh(),x(null)},togglePublishStatus=async e=>{let s=!e.published,{error:n}=await b.from("blog_posts").update({published:s,published_at:s?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",e.id);if(n){y({title:"خطأ",description:"حدث خطأ أثناء تغيير حالة النشر",variant:"destructive"});return}y({title:"تم التحديث",description:s?"تم نشر المقال بنجاح":"تم إلغاء نشر المقال بنجاح"}),r.refresh()};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(c.iA,{children:[(0,n.jsx)(c.xD,{children:(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.ss,{children:"العنوان"}),(0,n.jsx)(c.ss,{children:"الرابط"}),(0,n.jsx)(c.ss,{children:"الحالة"}),(0,n.jsx)(c.ss,{children:"تاريخ الإنشاء"}),(0,n.jsx)(c.ss,{className:"w-[100px]",children:"الإجراءات"})]})}),(0,n.jsx)(c.RM,{children:0===s.length?(0,n.jsx)(c.SC,{children:(0,n.jsx)(c.pj,{colSpan:5,className:"text-center",children:"لا توجد مقالات"})}):s.map(e=>(0,n.jsxs)(c.SC,{children:[(0,n.jsx)(c.pj,{className:"font-medium",children:e.title}),(0,n.jsx)(c.pj,{className:"font-mono text-sm",children:e.slug}),(0,n.jsx)(c.pj,{children:(0,n.jsx)(Badge,{variant:e.published?"default":"outline",className:e.published?"bg-green-500":"",children:e.published?"منشور":"مسودة"})}),(0,n.jsx)(c.pj,{children:new Date(e.created_at).toLocaleDateString("ar-SA")}),(0,n.jsx)(c.pj,{children:(0,n.jsxs)(j.h_,{children:[(0,n.jsx)(j.$F,{asChild:!0,children:(0,n.jsxs)(o.z,{variant:"ghost",size:"icon",children:[(0,n.jsx)(g.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"فتح القائمة"})]})}),(0,n.jsxs)(j.AW,{align:"end",children:[(0,n.jsx)(l(),{href:"/admin/blog/".concat(e.id),children:(0,n.jsxs)(j.Xi,{children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"تعديل"]})}),(0,n.jsxs)(j.Xi,{onClick:()=>togglePublishStatus(e),children:[(0,n.jsx)(m,{className:"mr-2 h-4 w-4"}),e.published?"إلغاء النشر":"نشر"]}),(0,n.jsxs)(j.Xi,{className:"text-red-600",onClick:()=>{x(e),h(!0)},children:[(0,n.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),"حذف"]})]})]})})]},e.id))})]})}),(0,n.jsx)(p.aR,{open:i,onOpenChange:h,children:(0,n.jsxs)(p._T,{children:[(0,n.jsxs)(p.fY,{children:[(0,n.jsx)(p.f$,{children:"هل أنت متأكد من حذف هذا المقال؟"}),(0,n.jsx)(p.yT,{children:"هذا الإجراء لا يمكن التراجع عنه. سيتم حذف المقال نهائياً من قاعدة البيانات."})]}),(0,n.jsxs)(p.xo,{children:[(0,n.jsx)(p.le,{children:"إلغاء"}),(0,n.jsx)(p.OL,{className:"bg-red-600 hover:bg-red-700",onClick:handleDelete,children:"حذف"})]})]})})]})}}},function(e){e.O(0,[617,618,36,276,339,437,505,262,744],function(){return e(e.s=907)}),_N_E=e.O()}]);