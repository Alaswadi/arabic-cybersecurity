(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{9856:function(e,s,n){Promise.resolve().then(n.bind(n,3369)),Promise.resolve().then(n.t.bind(n,617,23))},3369:function(e,s,n){"use strict";n.r(s),n.d(s,{ServicesTable:function(){return ServicesTable}});var i=n(5667),r=n(2026),l=n(2353),c=n.n(l),d=n(6612),a=n(9736),t=n(5689),h=n(8712),j=n(4251),x=n(870),o=n(9397),m=n(5607),u=n(5327),f=n(1596);function ServicesTable(e){let{services:s}=e,n=(0,d.useRouter)(),[l,p]=(0,r.useState)(!1),[v,N]=(0,r.useState)(null),g=(0,a.e)(),{toast:b}=(0,f.p)(),handleDelete=async()=>{if(!v)return;let{error:e}=await g.from("services").delete().eq("id",v.id);if(e){b({title:"خطأ",description:"حدث خطأ أثناء حذف الخدمة",variant:"destructive"});return}b({title:"تم الحذف",description:"تم حذف الخدمة بنجاح"}),n.refresh(),N(null)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"rounded-md border",children:(0,i.jsxs)(t.iA,{children:[(0,i.jsx)(t.xD,{children:(0,i.jsxs)(t.SC,{children:[(0,i.jsx)(t.ss,{children:"العنوان"}),(0,i.jsx)(t.ss,{children:"الأيقونة"}),(0,i.jsx)(t.ss,{children:"الصورة"}),(0,i.jsx)(t.ss,{children:"تاريخ الإنشاء"}),(0,i.jsx)(t.ss,{className:"w-[100px]",children:"الإجراءات"})]})}),(0,i.jsx)(t.RM,{children:0===s.length?(0,i.jsx)(t.SC,{children:(0,i.jsx)(t.pj,{colSpan:4,className:"text-center",children:"لا توجد خدمات"})}):s.map(e=>(0,i.jsxs)(t.SC,{children:[(0,i.jsx)(t.pj,{className:"font-medium",children:e.title}),(0,i.jsx)(t.pj,{children:e.icon}),(0,i.jsx)(t.pj,{children:e.image?(0,i.jsx)("div",{className:"relative h-10 w-10 rounded overflow-hidden",children:(0,i.jsx)("img",{src:e.image,alt:e.title,className:"object-cover h-full w-full"})}):(0,i.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,i.jsx)(t.pj,{children:new Date(e.created_at).toLocaleDateString("ar-SA")}),(0,i.jsx)(t.pj,{children:(0,i.jsxs)(j.h_,{children:[(0,i.jsx)(j.$F,{asChild:!0,children:(0,i.jsxs)(h.z,{variant:"ghost",size:"icon",children:[(0,i.jsx)(o.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"فتح القائمة"})]})}),(0,i.jsxs)(j.AW,{align:"end",children:[(0,i.jsx)(c(),{href:"/admin/services/".concat(e.id),children:(0,i.jsxs)(j.Xi,{children:[(0,i.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"تعديل"]})}),(0,i.jsxs)(j.Xi,{className:"text-red-600",onClick:()=>{N(e),p(!0)},children:[(0,i.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"حذف"]})]})]})})]},e.id))})]})}),(0,i.jsx)(x.aR,{open:l,onOpenChange:p,children:(0,i.jsxs)(x._T,{children:[(0,i.jsxs)(x.fY,{children:[(0,i.jsx)(x.f$,{children:"هل أنت متأكد من حذف هذه الخدمة؟"}),(0,i.jsx)(x.yT,{children:"هذا الإجراء لا يمكن التراجع عنه. سيتم حذف الخدمة نهائياً من قاعدة البيانات."})]}),(0,i.jsxs)(x.xo,{children:[(0,i.jsx)(x.le,{children:"إلغاء"}),(0,i.jsx)(x.OL,{className:"bg-red-600 hover:bg-red-700",onClick:handleDelete,children:"حذف"})]})]})})]})}}},function(e){e.O(0,[617,618,36,276,339,437,505,262,744],function(){return e(e.s=9856)}),_N_E=e.O()}]);