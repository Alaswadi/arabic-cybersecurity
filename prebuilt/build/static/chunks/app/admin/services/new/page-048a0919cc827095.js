(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{7297:function(e,s,t){Promise.resolve().then(t.bind(t,1749))},1749:function(e,s,t){"use strict";t.r(s),t.d(s,{ServiceForm:function(){return ServiceForm}});var a=t(5667),r=t(2026),l=t(6612),i=t(9736),n=t(8712),d=t(9475),c=t(1444),o=t(279),u=t(8260),m=t(1596),f=t(8291),p=t(9457),h=t(2078),x=t(6605),j=t(2353),y=t.n(j),N=t(6411),v=t(2466),b=t(6653),g=t(8210),w=t(6889);let _=N.fC;N.ZA;let S=N.B4,Z=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(N.xz,{ref:s,className:(0,w.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,a.jsx)(N.JO,{asChild:!0,children:(0,a.jsx)(v.Z,{className:"h-4 w-4 opacity-50"})})]})});Z.displayName=N.xz.displayName;let k=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(N.u_,{ref:s,className:(0,w.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})});k.displayName=N.u_.displayName;let C=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(N.$G,{ref:s,className:(0,w.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})});C.displayName=N.$G.displayName;let R=r.forwardRef((e,s)=>{let{className:t,children:r,position:l="popper",...i}=e;return(0,a.jsx)(N.h_,{children:(0,a.jsxs)(N.VY,{ref:s,className:(0,w.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...i,children:[(0,a.jsx)(k,{}),(0,a.jsx)(N.l_,{className:(0,w.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(C,{})]})})});R.displayName=N.VY.displayName;let z=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(N.__,{ref:s,className:(0,w.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})});z.displayName=N.__.displayName;let F=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(N.ck,{ref:s,className:(0,w.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(N.wU,{children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(N.eT,{children:r})]})});F.displayName=N.ck.displayName;let O=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(N.Z0,{ref:s,className:(0,w.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});O.displayName=N.Z0.displayName;let T=["Shield","Lock","FileText","BarChart","Users","Bell","AlertTriangle","Database","Server","Wifi","Globe","Mail"];function ServiceForm(e){let{service:s}=e,t=(0,l.useRouter)(),j=!!s,[N,v]=(0,r.useState)((null==s?void 0:s.title)||""),[b,g]=(0,r.useState)((null==s?void 0:s.description)||""),[w,k]=(0,r.useState)((null==s?void 0:s.icon)||"Shield"),[C,z]=(0,r.useState)((null==s?void 0:s.image)||""),[O,q]=(0,r.useState)(null),[B,D]=(0,r.useState)(!1),E=(0,i.e)(),{toast:G}=(0,m.p)(),handleSubmit=async e=>{e.preventDefault(),q(null),D(!0);try{if(j){let{error:e}=await E.from("services").update({title:N,description:b,icon:w,image:C,updated_at:new Date().toISOString()}).eq("id",s.id);if(e)throw e;G({title:"تم التحديث",description:"تم تحديث الخدمة بنجاح"})}else{let{error:e}=await E.from("services").insert({title:N,description:b,icon:w,image:C});if(e)throw e;G({title:"تمت الإضافة",description:"تم إضافة الخدمة بنجاح"})}t.push("/admin/services"),t.refresh()}catch(e){q(e.message||"حدث خطأ أثناء حفظ الخدمة")}finally{D(!1)}};return(0,a.jsx)(u.Zb,{children:(0,a.jsxs)(u.aY,{className:"pt-6",children:[O&&(0,a.jsxs)(h.bZ,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)(h.X,{children:O})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"title",children:"عنوان الخدمة"}),(0,a.jsx)(d.I,{id:"title",value:N,onChange:e=>v(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"icon",children:"الأيقونة"}),(0,a.jsxs)(_,{value:w,onValueChange:k,children:[(0,a.jsx)(Z,{children:(0,a.jsx)(S,{placeholder:"اختر أيقونة"})}),(0,a.jsx)(R,{children:T.map(e=>(0,a.jsx)(F,{value:e,children:e},e))})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"اختر الأيقونة المناسبة للخدمة"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"description",children:"وصف الخدمة"}),(0,a.jsx)(o.g,{id:"description",value:b,onChange:e=>g(e.target.value),required:!0,rows:5})]}),(0,a.jsx)(x.t,{value:C,onChange:z,label:"صورة الخدمة",folder:"services",helpText:"صورة توضيحية للخدمة (اختياري)"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(y(),{href:"/admin/services",children:(0,a.jsxs)(n.z,{type:"button",variant:"outline",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"رجوع"]})}),(0,a.jsx)(n.z,{type:"submit",disabled:B,children:B?j?"جاري التحديث...":"جاري الإضافة...":j?"تحديث الخدمة":"إضافة الخدمة"})]})]})]})})}}},function(e){e.O(0,[617,618,36,534,276,125,637,505,262,744],function(){return e(e.s=7297)}),_N_E=e.O()}]);