(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[783],{7828:function(e,t,s){Promise.resolve().then(s.bind(s,1749)),Promise.resolve().then(s.t.bind(s,6657,23))},1749:function(e,t,s){"use strict";s.r(t),s.d(t,{ServiceForm:function(){return ServiceForm}});var a=s(5667),r=s(2026),l=s(6612),i=s(9736),n=s(8712),d=s(9475),o=s(1444),c=s(279),u=s(8260),m=s(1596),f=s(8291),p=s(9457),h=s(2078),x=s(6605),j=s(2353),N=s.n(j),y=s(6411),v=s(2466),b=s(6653),g=s(8210),w=s(6889);let _=y.fC;y.ZA;let S=y.B4,C=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(y.xz,{ref:t,className:(0,w.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(y.JO,{asChild:!0,children:(0,a.jsx)(v.Z,{className:"h-4 w-4 opacity-50"})})]})});C.displayName=y.xz.displayName;let R=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.u_,{ref:t,className:(0,w.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(b.Z,{className:"h-4 w-4"})})});R.displayName=y.u_.displayName;let Z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.$G,{ref:t,className:(0,w.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})});Z.displayName=y.$G.displayName;let O=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...i}=e;return(0,a.jsx)(y.h_,{children:(0,a.jsxs)(y.VY,{ref:t,className:(0,w.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,a.jsx)(R,{}),(0,a.jsx)(y.l_,{className:(0,w.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(Z,{})]})})});O.displayName=y.VY.displayName;let k=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.__,{ref:t,className:(0,w.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})});k.displayName=y.__.displayName;let E=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(y.ck,{ref:t,className:(0,w.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(y.wU,{children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(y.eT,{children:r})]})});E.displayName=y.ck.displayName;let z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(y.Z0,{ref:t,className:(0,w.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});z.displayName=y.Z0.displayName;let D=["Shield","Lock","FileText","BarChart","Users","Bell","AlertTriangle","Database","Server","Wifi","Globe","Mail"];function ServiceForm(e){let{service:t}=e,s=(0,l.useRouter)(),j=!!t,[y,v]=(0,r.useState)((null==t?void 0:t.title)||""),[b,g]=(0,r.useState)((null==t?void 0:t.description)||""),[w,R]=(0,r.useState)((null==t?void 0:t.icon)||"Shield"),[Z,k]=(0,r.useState)((null==t?void 0:t.image)||""),[z,F]=(0,r.useState)(null),[T,Y]=(0,r.useState)(!1),A=(0,i.e)(),{toast:I}=(0,m.p)(),handleSubmit=async e=>{e.preventDefault(),F(null),Y(!0);try{if(j){let{error:e}=await A.from("services").update({title:y,description:b,icon:w,image:Z,updated_at:new Date().toISOString()}).eq("id",t.id);if(e)throw e;I({title:"تم التحديث",description:"تم تحديث الخدمة بنجاح"})}else{let{error:e}=await A.from("services").insert({title:y,description:b,icon:w,image:Z});if(e)throw e;I({title:"تمت الإضافة",description:"تم إضافة الخدمة بنجاح"})}s.push("/admin/services"),s.refresh()}catch(e){F(e.message||"حدث خطأ أثناء حفظ الخدمة")}finally{Y(!1)}};return(0,a.jsx)(u.Zb,{children:(0,a.jsxs)(u.aY,{className:"pt-6",children:[z&&(0,a.jsxs)(h.bZ,{variant:"destructive",className:"mb-6",children:[(0,a.jsx)(f.Z,{className:"h-4 w-4"}),(0,a.jsx)(h.X,{children:z})]}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"title",children:"عنوان الخدمة"}),(0,a.jsx)(d.I,{id:"title",value:y,onChange:e=>v(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"icon",children:"الأيقونة"}),(0,a.jsxs)(_,{value:w,onValueChange:R,children:[(0,a.jsx)(C,{children:(0,a.jsx)(S,{placeholder:"اختر أيقونة"})}),(0,a.jsx)(O,{children:D.map(e=>(0,a.jsx)(E,{value:e,children:e},e))})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"اختر الأيقونة المناسبة للخدمة"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"description",children:"وصف الخدمة"}),(0,a.jsx)(c.g,{id:"description",value:b,onChange:e=>g(e.target.value),required:!0,rows:5})]}),(0,a.jsx)(x.t,{value:Z,onChange:k,label:"صورة الخدمة",folder:"services",helpText:"صورة توضيحية للخدمة (اختياري)"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(N(),{href:"/admin/services",children:(0,a.jsxs)(n.z,{type:"button",variant:"outline",children:[(0,a.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"رجوع"]})}),(0,a.jsx)(n.z,{type:"submit",disabled:T,children:T?j?"جاري التحديث...":"جاري الإضافة...":j?"تحديث الخدمة":"إضافة الخدمة"})]})]})]})})}},6657:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{suspense:function(){return suspense},NoSSR:function(){return NoSSR}});let a=s(8551);function suspense(){let e=Error(a.NEXT_DYNAMIC_NO_SSR_CODE);throw (e.digest=a.NEXT_DYNAMIC_NO_SSR_CODE, e)}function NoSSR(e){let{children:t}=e;return t}}},function(e){e.O(0,[617,618,36,534,276,125,637,505,262,744],function(){return e(e.s=7828)}),_N_E=e.O()}]);