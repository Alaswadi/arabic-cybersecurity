"use strict";exports.id=5268,exports.ids=[5268],exports.modules={48298:(e,a,s)=>{s.d(a,{t:()=>LocalImageUpload});var l=s(67622),r=s(50789),t=s(2877),i=s(84059),d=s(97301),n=s(8201),c=s(56704),o=s(94687),x=s(32132),u=s.n(x);function LocalImageUpload({value:e,onChange:a,label:s,folder:x,helpText:m}){let[g,f]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[b,j]=(0,r.useState)(e||null),y=(0,r.useRef)(null),handleFileChange=async e=>{let s=e.target.files?.[0];if(s){if(!s.type.startsWith("image/")){p("يرجى اختيار ملف صورة صالح");return}if(s.size>5242880){p("حجم الصورة يجب أن يكون أقل من 5 ميجابايت");return}f(!0),p(null);try{let e=new FormData;e.append("file",s),e.append("folder",x);let l=await fetch("/api/upload",{method:"POST",body:e});if(!l.ok){let e=await l.json();throw Error(e.error||"حدث خطأ أثناء رفع الصورة")}let r=await l.json(),t=r.url;a(t),j(t)}catch(e){console.error("Error uploading image:",e.message),p(e.message||"حدث خطأ أثناء رفع الصورة")}finally{f(!1)}}};return(0,l.jsxs)("div",{className:"space-y-2",children:[l.jsx(d._,{htmlFor:`image-upload-${s}`,children:s}),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[b?(0,l.jsxs)("div",{className:"relative w-full h-48 bg-gray-100 rounded-md overflow-hidden",children:[l.jsx(u(),{src:b,alt:s,fill:!0,className:"object-cover"}),l.jsx(t.z,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8",onClick:()=>{a(""),j(null),y.current&&(y.current.value="")},children:l.jsx(n.Z,{className:"h-4 w-4"})})]}):(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-6 flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900",children:[l.jsx(c.Z,{className:"h-12 w-12 text-gray-400 mb-2"}),l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"اضغط لاختيار صورة أو اسحب الصورة هنا"}),l.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG, GIF حتى 5MB"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx(i.I,{ref:y,id:`image-upload-${s}`,type:"file",accept:"image/*",onChange:handleFileChange,className:"hidden"}),l.jsx(t.z,{type:"button",variant:"outline",onClick:()=>y.current?.click(),disabled:g,className:"flex-1",children:g?l.jsx("span",{children:"جاري الرفع..."}):(0,l.jsxs)(l.Fragment,{children:[l.jsx(o.Z,{className:"mr-2 h-4 w-4"}),b?"تغيير الصورة":"اختيار صورة"]})}),b&&l.jsx(i.I,{value:b,onChange:e=>a(e.target.value),placeholder:"رابط الصورة",className:"flex-1"})]}),h&&l.jsx("p",{className:"text-sm text-red-500",children:h}),m&&l.jsx("p",{className:"text-sm text-gray-500",children:m})]})]})}},13831:(e,a,s)=>{s.d(a,{g:()=>i});var l=s(67622),r=s(50789),t=s(54155);let i=r.forwardRef(({className:e,...a},s)=>l.jsx("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...a}));i.displayName="Textarea"}};